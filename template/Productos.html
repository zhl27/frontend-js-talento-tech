<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BazarSur</title>
    <!-- Favicon -->
    <link rel="icon" href="/images/img/favicon.bazar.ico">
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
    <header>
    </header>

    <main class="products container" id="lista-1">

        <h2>Piezas restauradas a la venta</h2>

        <div class="product-content">
        </div>
    </main>

    <footer class="footer">
    </footer>

<script src="/js/header.js"></script>
<script src="/js/footer.js"></script>
<script src="/js/carrito.js"></script>

<script>

    fetch('/productosLista.json')
        .then(response => response.json())
        .then(data => {
            let productContent = document.querySelector('#lista-1 .product-content'); //Selecciona el elemento del DOM donde se mostrarán los productos.
                // Iteramos sobre cada producto y agregamos divs a la productContent
                for (let producto of data) {
                    let productDiv = document.createElement('div'); //Crea un nuevo div para cada producto.
                    productDiv.innerHTML = 
                    `
                        <img src="${producto.imagen}" alt="${producto.nombre}">
                        <div class="product-txt">
                            <h3>${producto.nombre}</h3>
                            <p class="cantidad">En Stock: ${producto.stock}</p>
                            <p class="precio">$${producto.precio}</p>
                            <a href="javascript:agregarAlCarrito(${data.find(p => p.id === producto.id)});" 
                                class="agregar-carrito btn-2">Agregar al carrito</a>
                        </div>
                    `;
                    //Una vez que se crea el div con el contenido del producto, se agrega a la productContent utilizando el método appendChild del elemento productContent.
                    productContent.appendChild(productDiv);
                }
        });


</script>

</body>
</html>